# お返しギフト提案システム ワークフロー

## 1. ユーザー入力フォーム
### 入力項目
- 受け取ったギフトの種類
- ギフトの価格帯
- 贈り主との関係性（上司、同僚、友人など）
- イベントの種類（結婚祝い、出産祝いなど）
- その他特記事項

## 2. プロンプト生成プロセス（OpenAI API）
1. ユーザー入力を受け取り
2. 入力データを構造化
3. OpenAI APIを使用して以下の要素を含むプロンプトを生成:
   - ギフトの適切な価格帯の提案
   - 関係性に応じた適切なギフトの種類
   - マナーや慣習への配慮点
   - 検索キーワードの生成

## 3. 情報検索プロセス（Perplexity API）
1. 生成されたプロンプトを基に検索クエリを実行
2. 以下の情報を収集:
   - 具体的なギフト商品の提案
   - 価格情報
   - 購入可能な店舗情報
   - ユーザーレビューや評価情報

## 4. 結果表示
1. 検索結果を整理・構造化
2. ユーザーに以下の形式で表示:
   - おすすめギフトのリスト
   - 価格帯
   - 購入先情報
   - 選定理由
   - マナーに関するアドバイス

## 5. システム構成
### フロントエンド
- 入力フォームコンポーネント
- 結果表示コンポーネント
- ローディング表示

### バックエンド
- OpenAI API連携モジュール
- Perplexity API連携モジュール
- データ処理・整形モジュール

### API連携
1. OpenAI API: プロンプト生成
2. Perplexity API: 情報検索

## 6. エラーハンドリング
- API接続エラー時の処理
- 入力バリデーション
- タイムアウト処理

## 7. 非機能要件
- レスポンス時間: 3秒以内
- 同時接続数: 100ユーザー
- データ保持期間: セッション中のみ
- セキュリティ: HTTPS通信、API keyの安全な管理 